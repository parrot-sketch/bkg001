generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model User {
  id                     String                 @id @default(uuid())
  email                  String                 @unique
  password_hash          String
  role                   Role
  status                 Status                 @default(ACTIVE)
  mfa_enabled            Boolean                @default(false)
  mfa_secret             String?
  first_name             String?
  last_name              String?
  phone                  String?
  last_login_at          DateTime?
  created_at             DateTime               @default(now())
  updated_at             DateTime               @updatedAt
  audit_logs             AuditLog[]
  care_notes             CareNote[]             @relation("CareNoteNurse")
  clinical_audit_events  ClinicalAuditEvent[]
  forms_created          ClinicalFormResponse[] @relation("FormCreatedBy")
  forms_signed           ClinicalFormResponse[] @relation("FormSignedBy")
  forms_updated          ClinicalFormResponse[] @relation("FormUpdatedBy")
  witnessed_consents     ConsentForm[]
  consultations          Consultation[]
  doctor_profile         Doctor?                @relation("DoctorUser")
  notifications_sent     Notification[]         @relation("NotificationSender")
  notifications_received Notification[]         @relation("NotificationRecipient")
  nurse_assignments      NurseAssignment[]      @relation("NurseAssignments")
  assigned_patients      Patient[]              @relation("PatientAssignment")
  patient_profile        Patient?               @relation("PatientUser")
  refresh_tokens         RefreshToken[]
  staff_invites_sent     StaffInvite[]          @relation("StaffInviteInviter")
  staff_invites_received StaffInvite[]          @relation("StaffInviteUser")
  checklist_sign_ins     SurgicalChecklist[]    @relation("ChecklistSignIn")
  checklist_sign_outs    SurgicalChecklist[]    @relation("ChecklistSignOut")
  checklist_time_outs    SurgicalChecklist[]    @relation("ChecklistTimeOut")
  surgical_assignments   SurgicalStaff[]

  @@index([email])
  @@index([role])
  @@index([status])
  @@index([role, status])
}

model RefreshToken {
  id         Int       @id @default(autoincrement())
  user_id    String
  token      String    @unique
  expires_at DateTime
  revoked    Boolean   @default(false)
  revoked_at DateTime?
  created_at DateTime  @default(now())
  updated_at DateTime  @updatedAt
  user       User      @relation(fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
  @@index([token])
  @@index([expires_at])
  @@index([user_id, revoked])
}

model Patient {
  id                       String                 @id @default(uuid())
  file_number              String                 @unique
  user_id                  String?                @unique
  first_name               String
  last_name                String
  date_of_birth            DateTime
  gender                   Gender                 @default(FEMALE)
  phone                    String
  whatsapp_phone           String?
  email                    String                 @unique
  marital_status           String
  occupation               String?
  address                  String
  emergency_contact_name   String
  emergency_contact_number String
  relation                 String
  blood_group              String?
  allergies                String?
  medical_conditions       String?
  medical_history          String?
  insurance_provider       String?
  insurance_number         String?
  privacy_consent          Boolean                @default(false)
  service_consent          Boolean                @default(false)
  medical_consent          Boolean                @default(false)
  img                      String?
  colorCode                String?
  approved                 Boolean                @default(false)
  approved_by              String?
  approved_at              DateTime?
  assigned_to_user_id      String?
  created_at               DateTime               @default(now())
  updated_at               DateTime               @updatedAt
  appointments             Appointment[]
  care_notes               CareNote[]
  case_plans               CasePlan[]
  clinical_form_responses  ClinicalFormResponse[]
  clinical_tasks           ClinicalTask[]
  diagnoses                Diagnosis[]            @relation("PatientDiagnosis")
  doctor_consultations     DoctorConsultation[]
  medical_records          MedicalRecord[]
  nurse_assignments        NurseAssignment[]
  assigned_to              User?                  @relation("PatientAssignment", fields: [assigned_to_user_id], references: [id])
  user                     User?                  @relation("PatientUser", fields: [user_id], references: [id])
  patient_images           PatientImage[]
  payments                 Payment[]
  ratings                  Rating[]
  surgical_cases           SurgicalCase[]
  surgical_outcomes        SurgicalOutcome[]
  vital_signs              VitalSign[]

  @@index([email])
  @@index([user_id])
  @@index([assigned_to_user_id])
  @@index([approved])
  @@index([created_at])
  @@index([file_number])
  @@index([phone])
  @@index([last_name])
  @@index([first_name, last_name])
  @@index([first_name], map: "idx_patient_firstname_search")
}

model Doctor {
  id                        String                 @id @default(uuid())
  user_id                   String                 @unique
  email                     String                 @unique
  first_name                String
  last_name                 String
  title                     String?
  name                      String
  specialization            String
  license_number            String                 @unique
  phone                     String
  address                   String
  clinic_location           String?
  department                String?
  img                       String?
  profile_image             String?
  colorCode                 String?
  availability_status       String?                @default("AVAILABLE")
  type                      JOBTYPE                @default(FULL)
  bio                       String?
  education                 String?
  focus_areas               String?
  professional_affiliations String?
  onboarding_status         DoctorOnboardingStatus @default(INVITED)
  invited_at                DateTime?
  invited_by                String?
  activated_at              DateTime?
  profile_completed_at      DateTime?
  created_at                DateTime               @default(now())
  updated_at                DateTime               @updatedAt
  consultation_fee          Float?                 @default(0.0)
  languages                 String?
  years_of_experience       Int?                   @default(0)
  slug                      String?                @unique
  appointments              Appointment[]
  availability_overrides    AvailabilityOverride[]
  availability_templates    AvailabilityTemplate[]
  case_plans                CasePlan[]
  consultations             Consultation[]
  consultation_messages     ConsultationMessage[]  @relation("ConsultationMessageSender")
  diagnoses                 Diagnosis[]            @relation("DiagnosisDoctor")
  user                      User                   @relation("DoctorUser", fields: [user_id], references: [id], onDelete: Cascade)
  consulting_consultations  DoctorConsultation[]   @relation("ConsultingDoctor")
  requesting_consultations  DoctorConsultation[]   @relation("RequestingDoctor")
  medical_records           MedicalRecord[]        @relation("MedicalRecordDoctor")
  ratings                   Rating[]
  schedule_blocks           ScheduleBlock[]
  slot_configuration        SlotConfiguration?
  primary_surgical_cases    SurgicalCase[]
  surgical_outcomes         SurgicalOutcome[]

  @@index([email])
  @@index([user_id])
  @@index([license_number])
  @@index([specialization])
  @@index([onboarding_status])
  @@index([invited_by])
  @@index([phone])
  @@index([name])
}

model DoctorInviteToken {
  id             String    @id @default(uuid())
  doctor_id      String?   @unique
  email          String    @unique
  token          String    @unique
  invited_by     String
  expires_at     DateTime
  used_at        DateTime?
  invalidated_at DateTime?
  created_at     DateTime  @default(now())
  updated_at     DateTime  @updatedAt

  @@index([token])
  @@index([email])
  @@index([doctor_id])
  @@index([expires_at])
  @@index([invited_by])
}

model AvailabilityOverride {
  id         String   @id @default(uuid())
  doctor_id  String
  start_date DateTime
  end_date   DateTime
  reason     String?
  is_blocked Boolean  @default(true)
  start_time String?
  end_time   String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  doctor     Doctor   @relation(fields: [doctor_id], references: [id], onDelete: Cascade)

  @@index([doctor_id])
  @@index([start_date, end_date])
  @@index([doctor_id, start_date, end_date])
}

model AvailabilityTemplate {
  id         String             @id @default(uuid())
  doctor_id  String
  name       String
  is_active  Boolean            @default(false)
  created_at DateTime           @default(now())
  updated_at DateTime           @updatedAt
  slots      AvailabilitySlot[]
  doctor     Doctor             @relation(fields: [doctor_id], references: [id], onDelete: Cascade)

  @@index([doctor_id])
}

model AvailabilitySlot {
  id           String               @id @default(uuid())
  template_id  String
  day_of_week  Int
  start_time   String
  end_time     String
  slot_type    String?              @default("CLINIC")
  max_patients Int?
  created_at   DateTime             @default(now())
  updated_at   DateTime             @updatedAt
  template     AvailabilityTemplate @relation(fields: [template_id], references: [id], onDelete: Cascade)

  @@index([template_id])
  @@index([template_id, day_of_week])
}

model ScheduleBlock {
  id         String   @id @default(uuid())
  doctor_id  String
  start_date DateTime
  end_date   DateTime
  start_time String?
  end_time   String?
  block_type String
  reason     String?
  created_by String
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  doctor     Doctor   @relation(fields: [doctor_id], references: [id], onDelete: Cascade)

  @@index([doctor_id])
  @@index([start_date, end_date])
  @@index([doctor_id, start_date, end_date])
}

model SlotConfiguration {
  id               String   @id @default(uuid())
  doctor_id        String   @unique
  default_duration Int      @default(30)
  buffer_time      Int      @default(0)
  slot_interval    Int      @default(15)
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt
  doctor           Doctor   @relation(fields: [doctor_id], references: [id], onDelete: Cascade)

  @@index([doctor_id])
}

model Appointment {
  id                            Int                        @id @default(autoincrement())
  patient_id                    String
  doctor_id                     String
  appointment_date              DateTime
  time                          String
  status                        AppointmentStatus          @default(PENDING)
  type                          String
  note                          String?
  reason                        String?
  checked_in_at                 DateTime?
  checked_in_by                 String?
  late_arrival                  Boolean                    @default(false)
  late_by_minutes               Int?
  scheduled_at                  DateTime?
  status_changed_at             DateTime                   @default(now())
  status_changed_by             String?
  doctor_confirmed_at           DateTime?
  doctor_confirmed_by           String?
  doctor_rejection_reason       String?
  no_show                       Boolean                    @default(false)
  no_show_at                    DateTime?
  no_show_reason                String?
  no_show_notes                 String?
  rescheduled_to_appointment_id Int?
  marked_no_show_at             DateTime?
  consultation_request_status   ConsultationRequestStatus?
  reviewed_by                   String?
  reviewed_at                   DateTime?
  review_notes                  String?
  slot_start_time               String?
  slot_duration                 Int?                       @default(30)
  duration_minutes              Int?
  created_at                    DateTime                   @default(now())
  updated_at                    DateTime                   @updatedAt
  locked_at                     DateTime?
  locked_by                     String?
  resource_id                   String?
  version                       Int                        @default(1)
  consultation_duration         Int?
  consultation_ended_at         DateTime?
  consultation_started_at       DateTime?
  parent_appointment_id         Int?
  parent_consultation_id        Int?
  source                        AppointmentSource          @default(PATIENT_REQUESTED)
  doctor                        Doctor                     @relation(fields: [doctor_id], references: [id], onDelete: Cascade)
  parent_appointment            Appointment?               @relation("FollowUpChain", fields: [parent_appointment_id], references: [id])
  follow_up_appointments        Appointment[]              @relation("FollowUpChain")
  parent_consultation           Consultation?              @relation("ConsultationFollowUp", fields: [parent_consultation_id], references: [id])
  patient                       Patient                    @relation(fields: [patient_id], references: [id], onDelete: Cascade)
  care_notes                    CareNote[]
  case_plan                     CasePlan?
  clinical_tasks                ClinicalTask[]
  consultation                  Consultation?              @relation("AppointmentConsultation")
  doctor_consultations          DoctorConsultation[]       @relation("DoctorConsultationAppointment")
  inventory_usage               InventoryUsage[]
  medical_records               MedicalRecord[]
  nurse_assignments             NurseAssignment[]          @relation("NurseAssignmentAppointment")
  patient_images                PatientImage[]
  payments                      Payment?
  surgical_outcome              SurgicalOutcome?
  vital_signs                   VitalSign[]                @relation("VitalSignAppointment")

  @@unique([doctor_id, scheduled_at], map: "unique_doctor_scheduled_slot")
  @@index([patient_id])
  @@index([doctor_id])
  @@index([appointment_date])
  @@index([status])
  @@index([source])
  @@index([appointment_date, status])
  @@index([doctor_id, appointment_date, time])
  @@index([consultation_request_status])
  @@index([reviewed_by])
  @@index([created_at])
  @@index([updated_at])
  @@index([doctor_id, scheduled_at])
  @@index([doctor_id, status, scheduled_at])
  @@index([patient_id, scheduled_at])
  @@index([patient_id, status, scheduled_at])
  @@index([status, created_at])
  @@index([status_changed_at])
  @@index([status_changed_by])
}

model Consultation {
  id                     Int           @id @default(autoincrement())
  appointment_id         Int           @unique
  doctor_id              String
  user_id                String?
  started_at             DateTime?
  completed_at           DateTime?
  duration_minutes       Int?
  doctor_notes           String?
  outcome                String?
  outcome_type           String?
  patient_decision       String?
  follow_up_date         DateTime?
  follow_up_type         String?
  follow_up_notes        String?
  created_at             DateTime      @default(now())
  updated_at             DateTime      @updatedAt
  assessment             String?
  chief_complaint        String?
  examination            String?
  plan                   String?
  follow_up_appointments Appointment[] @relation("ConsultationFollowUp")
  appointment            Appointment   @relation("AppointmentConsultation", fields: [appointment_id], references: [id], onDelete: Cascade)
  doctor                 Doctor        @relation(fields: [doctor_id], references: [id], onDelete: Cascade)
  user                   User?         @relation(fields: [user_id], references: [id])
  surgical_case          SurgicalCase?

  @@index([appointment_id])
  @@index([doctor_id])
  @@index([started_at])
  @@index([completed_at])
  @@index([user_id])
}

model NurseAssignment {
  id             Int          @id @default(autoincrement())
  patient_id     String
  nurse_user_id  String
  appointment_id Int?
  assigned_at    DateTime     @default(now())
  assigned_by    String?
  notes          String?
  created_at     DateTime     @default(now())
  updated_at     DateTime     @updatedAt
  appointment    Appointment? @relation("NurseAssignmentAppointment", fields: [appointment_id], references: [id])
  nurse          User         @relation("NurseAssignments", fields: [nurse_user_id], references: [id], onDelete: Cascade)
  patient        Patient      @relation(fields: [patient_id], references: [id], onDelete: Cascade)

  @@index([patient_id])
  @@index([nurse_user_id])
  @@index([appointment_id])
}

model CareNote {
  id             Int          @id @default(autoincrement())
  patient_id     String
  nurse_user_id  String
  appointment_id Int?
  note_type      CareNoteType @default(GENERAL)
  note           String
  recorded_at    DateTime     @default(now())
  created_at     DateTime     @default(now())
  updated_at     DateTime     @updatedAt
  appointment    Appointment? @relation(fields: [appointment_id], references: [id])
  nurse          User         @relation("CareNoteNurse", fields: [nurse_user_id], references: [id], onDelete: Cascade)
  patient        Patient      @relation(fields: [patient_id], references: [id], onDelete: Cascade)

  @@index([patient_id])
  @@index([nurse_user_id])
  @@index([appointment_id])
  @@index([note_type])
  @@index([recorded_at])
}

model VitalSign {
  id                Int            @id @default(autoincrement())
  patient_id        String
  appointment_id    Int?
  medical_record_id Int?
  body_temperature  Float?
  systolic          Int?
  diastolic         Int?
  heart_rate        String?
  respiratory_rate  Int?
  oxygen_saturation Int?
  weight            Float?
  height            Float?
  recorded_by       String
  recorded_at       DateTime       @default(now())
  created_at        DateTime       @default(now())
  updated_at        DateTime       @updatedAt
  appointment       Appointment?   @relation("VitalSignAppointment", fields: [appointment_id], references: [id])
  medical_record    MedicalRecord? @relation(fields: [medical_record_id], references: [id])
  patient           Patient        @relation(fields: [patient_id], references: [id], onDelete: Cascade)

  @@index([patient_id])
  @@index([appointment_id])
  @@index([recorded_at])
}

model MedicalRecord {
  id             Int         @id @default(autoincrement())
  patient_id     String
  appointment_id Int
  doctor_id      String
  treatment_plan String?
  prescriptions  String?
  lab_request    String?
  notes          String?
  created_at     DateTime    @default(now())
  updated_at     DateTime    @updatedAt
  diagnoses      Diagnosis[]
  lab_tests      LabTest[]
  appointment    Appointment @relation(fields: [appointment_id], references: [id], onDelete: Cascade)
  doctor         Doctor      @relation("MedicalRecordDoctor", fields: [doctor_id], references: [id], onDelete: Cascade)
  patient        Patient     @relation(fields: [patient_id], references: [id], onDelete: Cascade)
  vital_signs    VitalSign[]

  @@index([patient_id])
  @@index([appointment_id])
  @@index([doctor_id])
  @@index([created_at])
}

model Diagnosis {
  id                     Int           @id @default(autoincrement())
  patient_id             String
  medical_record_id      Int
  doctor_id              String
  symptoms               String
  diagnosis              String
  notes                  String?
  prescribed_medications String?
  follow_up_plan         String?
  created_at             DateTime      @default(now())
  updated_at             DateTime      @updatedAt
  doctor                 Doctor        @relation("DiagnosisDoctor", fields: [doctor_id], references: [id], onDelete: Cascade)
  medical_record         MedicalRecord @relation(fields: [medical_record_id], references: [id], onDelete: Cascade)
  patient                Patient       @relation("PatientDiagnosis", fields: [patient_id], references: [id], onDelete: Cascade)

  @@index([patient_id])
  @@index([medical_record_id])
  @@index([doctor_id])
}

model LabTest {
  id                Int           @id @default(autoincrement())
  medical_record_id Int
  test_date         DateTime
  result            String
  status            String
  notes             String?
  service_id        Int?          @unique
  created_at        DateTime      @default(now())
  updated_at        DateTime      @updatedAt
  medical_record    MedicalRecord @relation(fields: [medical_record_id], references: [id], onDelete: Cascade)
  service           Service?      @relation(fields: [service_id], references: [id])

  @@index([medical_record_id])
  @@index([test_date])
}

model Payment {
  id               Int           @id @default(autoincrement())
  patient_id       String
  appointment_id   Int?          @unique
  bill_date        DateTime
  payment_date     DateTime?
  discount         Float         @default(0)
  total_amount     Float
  amount_paid      Float         @default(0)
  payment_method   PaymentMethod @default(CASH)
  status           PaymentStatus @default(UNPAID)
  receipt_number   String?       @unique
  created_at       DateTime      @default(now())
  updated_at       DateTime      @updatedAt
  bill_type        BillType      @default(CONSULTATION)
  notes            String?
  surgical_case_id String?       @unique
  bill_items       PatientBill[]
  appointment      Appointment?  @relation(fields: [appointment_id], references: [id], onDelete: Cascade)
  patient          Patient       @relation(fields: [patient_id], references: [id], onDelete: Cascade)
  surgical_case    SurgicalCase? @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)

  @@index([patient_id])
  @@index([appointment_id])
  @@index([surgical_case_id])
  @@index([bill_type])
  @@index([status])
  @@index([payment_date])
  @@index([bill_date])
  @@index([created_at])
}

model PatientBill {
  id                            Int                       @id @default(autoincrement())
  payment_id                    Int
  service_id                    Int
  service_date                  DateTime
  quantity                      Int                       @default(1)
  unit_cost                     Float
  total_cost                    Float
  created_at                    DateTime                  @default(now())
  updated_at                    DateTime                  @updatedAt
  surgical_medication_record_id String?                   @unique
  inventory_usage               InventoryUsage?
  payment                       Payment                   @relation(fields: [payment_id], references: [id], onDelete: Cascade)
  service                       Service                   @relation(fields: [service_id], references: [id], onDelete: Cascade)
  surgical_medication_record    SurgicalMedicationRecord? @relation("MedicationPatientBill", fields: [surgical_medication_record_id], references: [id])

  @@index([payment_id])
  @@index([service_id])
  @@index([surgical_medication_record_id])
}

model Service {
  id           Int           @id @default(autoincrement())
  service_name String
  description  String?
  price        Float
  category     String?
  is_active    Boolean       @default(true)
  created_at   DateTime      @default(now())
  updated_at   DateTime      @updatedAt
  max_price    Float?
  min_price    Float?
  price_type   PriceType     @default(FIXED)
  lab_test     LabTest?
  bill_items   PatientBill[]

  @@index([service_name])
  @@index([category])
  @@index([is_active])
  @@index([price_type])
}

model InventoryItem {
  id                 Int                        @id @default(autoincrement())
  name               String
  sku                String?                    @unique
  category           InventoryCategory          @default(OTHER)
  description        String?
  unit_of_measure    String                     @default("unit")
  unit_cost          Float                      @default(0)
  quantity_on_hand   Int                        @default(0)
  reorder_point      Int                        @default(0)
  supplier           String?
  is_active          Boolean                    @default(true)
  is_billable        Boolean                    @default(true)
  created_at         DateTime                   @default(now())
  updated_at         DateTime                   @updatedAt
  is_implant         Boolean                    @default(false)
  manufacturer       String?
  batches            InventoryBatch[]
  usage_records      InventoryUsage[]
  medication_records SurgicalMedicationRecord[]

  @@index([name])
  @@index([sku])
  @@index([category])
  @@index([is_active])
  @@index([quantity_on_hand])
}

model InventoryBatch {
  id                 String           @id @default(uuid())
  inventory_item_id  Int
  batch_number       String
  serial_number      String?
  expiry_date        DateTime
  quantity_remaining Int              @default(1)
  cost_per_unit      Float            @default(0)
  received_at        DateTime         @default(now())
  supplier           String?
  notes              String?
  created_at         DateTime         @default(now())
  updated_at         DateTime         @updatedAt
  inventory_item     InventoryItem    @relation(fields: [inventory_item_id], references: [id], onDelete: Cascade)
  usage_records      InventoryUsage[]

  @@index([inventory_item_id])
  @@index([batch_number])
  @@index([serial_number])
  @@index([expiry_date])
}

model InventoryUsage {
  id                            Int                       @id @default(autoincrement())
  inventory_item_id             Int
  surgical_case_id              String?
  appointment_id                Int?
  quantity_used                 Float                     @default(1)
  unit_cost_at_time             Float
  total_cost                    Float
  recorded_by                   String
  notes                         String?
  bill_item_id                  Int?                      @unique
  created_at                    DateTime                  @default(now())
  updated_at                    DateTime                  @updatedAt
  inventory_batch_id            String?
  surgical_medication_record_id String?                   @unique
  appointment                   Appointment?              @relation(fields: [appointment_id], references: [id])
  bill_item                     PatientBill?              @relation(fields: [bill_item_id], references: [id])
  inventory_batch               InventoryBatch?           @relation(fields: [inventory_batch_id], references: [id])
  inventory_item                InventoryItem             @relation(fields: [inventory_item_id], references: [id], onDelete: Cascade)
  surgical_case                 SurgicalCase?             @relation(fields: [surgical_case_id], references: [id])
  surgical_medication_record    SurgicalMedicationRecord? @relation("MedicationInventoryUsage", fields: [surgical_medication_record_id], references: [id])

  @@index([inventory_item_id])
  @@index([inventory_batch_id])
  @@index([surgical_case_id])
  @@index([appointment_id])
  @@index([recorded_by])
  @@index([created_at])
}

model Rating {
  id         Int      @id @default(autoincrement())
  doctor_id  String
  patient_id String
  rating     Int
  comment    String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  doctor     Doctor   @relation(fields: [doctor_id], references: [id], onDelete: Cascade)
  patient    Patient  @relation(fields: [patient_id], references: [id], onDelete: Cascade)

  @@unique([doctor_id, patient_id])
  @@index([doctor_id])
  @@index([patient_id])
  @@index([rating])
}

model Notification {
  id         Int                @id @default(autoincrement())
  user_id    String?
  sender_id  String?
  type       NotificationType
  status     NotificationStatus @default(PENDING)
  subject    String?
  message    String
  metadata   String?
  sent_at    DateTime?
  read_at    DateTime?
  created_at DateTime           @default(now())
  updated_at DateTime           @updatedAt
  sender     User?              @relation("NotificationSender", fields: [sender_id], references: [id])
  recipient  User?              @relation("NotificationRecipient", fields: [user_id], references: [id], onDelete: Cascade)

  @@index([user_id])
  @@index([status])
  @@index([type])
  @@index([sent_at])
}

model OutboxEvent {
  id              String       @id @default(uuid())
  type            String
  payload         String
  status          OutboxStatus @default(PENDING)
  error_message   String?
  retry_count     Int          @default(0)
  processed_at    DateTime?
  idempotency_key String?      @unique
  created_at      DateTime     @default(now())
  updated_at      DateTime     @updatedAt

  @@index([status, created_at])
  @@index([type])
}

model AuditLog {
  id         Int      @id @default(autoincrement())
  user_id    String?
  record_id  String
  action     String
  model      String
  details    String?
  ip_address String?
  user_agent String?
  created_at DateTime @default(now())
  updated_at DateTime @updatedAt
  user       User?    @relation(fields: [user_id], references: [id])

  @@index([user_id])
  @@index([model])
  @@index([action])
  @@index([created_at])
  @@index([user_id, created_at])
}

model DoctorConsultation {
  id                   String                   @id @default(uuid())
  case_id              Int?
  patient_id           String?
  requesting_doctor_id String
  consulting_doctor_id String
  urgency              ConsultUrgency           @default(ROUTINE)
  status               ConsultStatus            @default(OPEN)
  subject              String
  question             String
  background           String?
  what_is_needed       String?
  response             String?
  resolved_at          DateTime?
  resolved_by          String?
  created_at           DateTime                 @default(now())
  updated_at           DateTime                 @updatedAt
  attachments          ConsultationAttachment[]
  messages             ConsultationMessage[]
  appointment          Appointment?             @relation("DoctorConsultationAppointment", fields: [case_id], references: [id])
  consulting_doctor    Doctor                   @relation("ConsultingDoctor", fields: [consulting_doctor_id], references: [id], onDelete: Cascade)
  patient              Patient?                 @relation(fields: [patient_id], references: [id])
  requesting_doctor    Doctor                   @relation("RequestingDoctor", fields: [requesting_doctor_id], references: [id], onDelete: Cascade)

  @@index([requesting_doctor_id])
  @@index([consulting_doctor_id])
  @@index([patient_id])
  @@index([case_id])
  @@index([status])
  @@index([urgency])
  @@index([created_at])
}

model ConsultationAttachment {
  id              Int                @id @default(autoincrement())
  consultation_id String
  file_url        String
  file_name       String
  file_type       String?
  file_size       Int?
  description     String?
  created_at      DateTime           @default(now())
  updated_at      DateTime           @updatedAt
  consultation    DoctorConsultation @relation(fields: [consultation_id], references: [id], onDelete: Cascade)

  @@index([consultation_id])
}

model ConsultationMessage {
  id              Int                @id @default(autoincrement())
  consultation_id String
  sender_id       String
  message         String
  is_internal     Boolean            @default(true)
  created_at      DateTime           @default(now())
  updated_at      DateTime           @updatedAt
  consultation    DoctorConsultation @relation(fields: [consultation_id], references: [id], onDelete: Cascade)
  sender          Doctor             @relation("ConsultationMessageSender", fields: [sender_id], references: [id], onDelete: Cascade)

  @@index([consultation_id])
  @@index([sender_id])
  @@index([created_at])
}

model CasePlan {
  id                         Int                      @id @default(autoincrement())
  appointment_id             Int                      @unique
  surgical_case_id           String?                  @unique
  patient_id                 String
  doctor_id                  String
  procedure_plan             String?
  risk_factors               String?
  pre_op_notes               String?
  implant_details            String?
  marking_diagram            String?
  consent_checklist          String?
  planned_anesthesia         String?
  special_instructions       String?
  readiness_status           CaseReadinessStatus      @default(NOT_STARTED)
  ready_for_surgery          Boolean                  @default(false)
  created_at                 DateTime                 @default(now())
  updated_at                 DateTime                 @updatedAt
  estimated_duration_minutes Int?
  appointment                Appointment              @relation(fields: [appointment_id], references: [id], onDelete: Cascade)
  doctor                     Doctor                   @relation(fields: [doctor_id], references: [id], onDelete: Cascade)
  patient                    Patient                  @relation(fields: [patient_id], references: [id], onDelete: Cascade)
  surgical_case              SurgicalCase?            @relation(fields: [surgical_case_id], references: [id])
  consents                   ConsentForm[]
  images                     PatientImage[]
  procedure_record           SurgicalProcedureRecord?

  @@index([appointment_id])
  @@index([patient_id])
  @@index([doctor_id])
  @@index([readiness_status])
}

model SurgicalProcedureRecord {
  id                             Int                  @id @default(autoincrement())
  case_plan_id                   Int?                 @unique
  surgical_case_id               String?              @unique
  pre_op_diagnosis               String
  post_op_diagnosis              String?
  procedure_performed            String?
  urgency                        SurgicalUrgency      @default(ELECTIVE)
  theater_id                     String?
  anesthesia_start               DateTime?
  incision_time                  DateTime?
  closure_time                   DateTime?
  wheels_out                     DateTime?
  shaving_required               Boolean              @default(false)
  shaving_extent                 String?
  skin_prep_agent                String?
  anesthesia_type                AnesthesiaType?
  asa_score                      Int?
  wound_class                    WoundClassification?
  created_at                     DateTime             @default(now())
  updated_at                     DateTime             @updatedAt
  anesthesia_end                 DateTime?
  anesthesiologist_snapshot_id   String?
  assistant_surgeon_snapshot_ids String?
  primary_surgeon_snapshot_id    String?
  wheels_in                      DateTime?
  staff_invites                  StaffInvite[]
  case_plan                      CasePlan?            @relation(fields: [case_plan_id], references: [id])
  surgical_case                  SurgicalCase?        @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)
  theater                        Theater?             @relation(fields: [theater_id], references: [id])
  staff                          SurgicalStaff[]

  @@index([case_plan_id])
  @@index([theater_id])
  @@index([surgical_case_id, wheels_in])
}

model SurgicalStaff {
  id                  Int                     @id @default(autoincrement())
  procedure_record_id Int
  user_id             String
  role                SurgicalRole
  notes               String?
  procedure_record    SurgicalProcedureRecord @relation(fields: [procedure_record_id], references: [id], onDelete: Cascade)
  user                User                    @relation(fields: [user_id], references: [id])

  @@unique([procedure_record_id, user_id, role])
  @@index([procedure_record_id])
  @@index([user_id])
}

model StaffInvite {
  id                  String                   @id @default(uuid())
  surgical_case_id    String
  procedure_record_id Int?
  invited_user_id     String
  invited_role        SurgicalRole
  invited_by_user_id  String
  status              InviteStatus             @default(PENDING)
  acknowledged_at     DateTime?
  declined_reason     String?
  created_at          DateTime                 @default(now())
  updated_at          DateTime                 @updatedAt
  invited_by          User                     @relation("StaffInviteInviter", fields: [invited_by_user_id], references: [id])
  invited_user        User                     @relation("StaffInviteUser", fields: [invited_user_id], references: [id], onDelete: Cascade)
  procedure_record    SurgicalProcedureRecord? @relation(fields: [procedure_record_id], references: [id], onDelete: Cascade)
  surgical_case       SurgicalCase             @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)

  @@unique([surgical_case_id, invited_user_id, invited_role], map: "unique_active_invite")
  @@index([invited_user_id, status])
  @@index([surgical_case_id])
}

model ConsentForm {
  id                String        @id @default(uuid())
  case_plan_id      Int
  title             String
  type              ConsentType
  content_snapshot  String
  version           Int           @default(1)
  status            ConsentStatus @default(DRAFT)
  patient_signature String?
  signed_at         DateTime?
  signed_by_ip      String?
  witness_signature String?
  witness_name      String?
  witness_id        String?
  valid_until       DateTime?
  created_at        DateTime      @default(now())
  updated_at        DateTime      @updatedAt
  case_plan         CasePlan      @relation(fields: [case_plan_id], references: [id], onDelete: Cascade)
  witness_user      User?         @relation(fields: [witness_id], references: [id])

  @@index([case_plan_id])
  @@index([status])
}

model PatientImage {
  id                    Int            @id @default(autoincrement())
  patient_id            String
  appointment_id        Int?
  case_plan_id          Int?
  image_url             String
  thumbnail_url         String?
  angle                 ImageAngle
  timepoint             ImageTimepoint
  custom_timepoint      String?
  description           String?
  consent_for_marketing Boolean        @default(false)
  taken_by              String?
  taken_at              DateTime       @default(now())
  created_at            DateTime       @default(now())
  updated_at            DateTime       @updatedAt
  appointment           Appointment?   @relation(fields: [appointment_id], references: [id])
  case_plan             CasePlan?      @relation(fields: [case_plan_id], references: [id])
  patient               Patient        @relation(fields: [patient_id], references: [id], onDelete: Cascade)

  @@index([patient_id])
  @@index([appointment_id])
  @@index([timepoint])
  @@index([angle])
  @@index([taken_at])
}

model ClinicalNoteTemplate {
  id               Int      @id @default(autoincrement())
  name             String
  template_type    String
  template_content String
  is_active        Boolean  @default(true)
  created_by       String?
  used_count       Int      @default(0)
  created_at       DateTime @default(now())
  updated_at       DateTime @updatedAt

  @@index([template_type])
  @@index([is_active])
}

model ClinicalTask {
  id               Int          @id @default(autoincrement())
  patient_id       String?
  appointment_id   Int?
  assigned_by      String
  assigned_to      String
  task_type        String
  title            String
  description      String?
  priority         TaskPriority @default(MEDIUM)
  status           TaskStatus   @default(PENDING)
  due_date         DateTime?
  completed_at     DateTime?
  completion_notes String?
  created_at       DateTime     @default(now())
  updated_at       DateTime     @updatedAt
  appointment      Appointment? @relation(fields: [appointment_id], references: [id])
  patient          Patient?     @relation(fields: [patient_id], references: [id])

  @@index([assigned_to])
  @@index([assigned_by])
  @@index([patient_id])
  @@index([appointment_id])
  @@index([status])
  @@index([priority])
  @@index([due_date])
}

model SurgicalOutcome {
  id                   Int           @id @default(autoincrement())
  appointment_id       Int           @unique
  patient_id           String
  doctor_id            String
  procedure_type       String
  outcome_status       OutcomeStatus
  complication_rate    Float?
  revision_required    Boolean       @default(false)
  revision_date        DateTime?
  patient_satisfaction Int?
  healing_timeline     String?
  notes                String?
  recorded_at          DateTime      @default(now())
  recorded_by          String
  created_at           DateTime      @default(now())
  updated_at           DateTime      @updatedAt
  appointment          Appointment   @relation(fields: [appointment_id], references: [id], onDelete: Cascade)
  doctor               Doctor        @relation(fields: [doctor_id], references: [id], onDelete: Cascade)
  patient              Patient       @relation(fields: [patient_id], references: [id], onDelete: Cascade)

  @@index([appointment_id])
  @@index([patient_id])
  @@index([doctor_id])
  @@index([procedure_type])
  @@index([outcome_status])
  @@index([recorded_at])
}

model Clinic {
  id            String   @id @default(uuid())
  name          String   @default("Nairobi Sculpt Surgical Aesthetic Center")
  address       String?
  phone         String?
  email         String?
  website       String?
  logo_url      String?
  primary_color String?  @default("#4F46E5")
  accent_color  String?
  created_at    DateTime @default(now())
  updated_at    DateTime @updatedAt
}

model Theater {
  id                String                    @id @default(uuid())
  name              String
  type              String
  status            Status                    @default(ACTIVE)
  color_code        String?
  notes             String?
  is_active         Boolean                   @default(true)
  operational_hours String?
  capabilities      String?
  created_at        DateTime                  @default(now())
  updated_at        DateTime                  @updatedAt
  surgical_records  SurgicalProcedureRecord[]
  bookings          TheaterBooking[]
}

model ConsentTemplate {
  id         String      @id @default(uuid())
  title      String
  type       ConsentType
  content    String
  version    Int         @default(1)
  is_active  Boolean     @default(true)
  created_by String?
  created_at DateTime    @default(now())
  updated_at DateTime    @updatedAt

  @@index([type])
  @@index([is_active])
}

model IntakeSession {
  id                 String            @id @default(cuid())
  session_id         String            @unique
  status             String            @default("ACTIVE")
  created_at         DateTime          @default(now())
  expires_at         DateTime
  created_by_user_id String?
  submissions        IntakeSubmission?

  @@index([session_id])
  @@index([expires_at])
  @@index([status])
  @@map("intake_session")
}

model IntakeSubmission {
  id                       String        @id @default(cuid())
  submission_id            String        @unique
  session_id               String        @unique
  first_name               String
  last_name                String
  date_of_birth            DateTime
  gender                   Gender
  email                    String
  phone                    String
  whatsapp_phone           String?
  address                  String
  marital_status           String
  occupation               String?
  emergency_contact_name   String
  emergency_contact_number String
  relation                 String
  blood_group              String?
  allergies                String?
  medical_conditions       String?
  medical_history          String?
  insurance_provider       String?
  insurance_number         String?
  privacy_consent          Boolean
  service_consent          Boolean
  medical_consent          Boolean
  submitted_at             DateTime      @default(now())
  ip_address               String?
  user_agent               String?
  status                   String        @default("PENDING")
  created_patient_id       String?
  confirmed_at             DateTime?
  confirmed_by_user_id     String?
  created_at               DateTime      @default(now())
  updated_at               DateTime      @updatedAt
  session                  IntakeSession @relation(fields: [session_id], references: [session_id], onDelete: Cascade)

  @@index([session_id])
  @@index([status])
  @@index([submitted_at])
  @@index([created_patient_id])
  @@map("intake_submission")
}

model SurgicalCase {
  id                 String                     @id @default(uuid())
  patient_id         String
  primary_surgeon_id String
  consultation_id    Int?                       @unique
  urgency            SurgicalUrgency            @default(ELECTIVE)
  status             SurgicalCaseStatus         @default(DRAFT)
  diagnosis          String?
  procedure_name     String?
  side               String?
  created_at         DateTime                   @default(now())
  updated_at         DateTime                   @updatedAt
  created_by         String?
  case_plan          CasePlan?
  clinical_forms     ClinicalFormResponse[]
  inventory_usage    InventoryUsage[]
  payment            Payment?
  staff_invites      StaffInvite[]
  consultation       Consultation?              @relation(fields: [consultation_id], references: [id])
  patient            Patient                    @relation(fields: [patient_id], references: [id], onDelete: Cascade)
  primary_surgeon    Doctor                     @relation(fields: [primary_surgeon_id], references: [id], onDelete: Cascade)
  checklist          SurgicalChecklist?
  medication_records SurgicalMedicationRecord[]
  procedure_record   SurgicalProcedureRecord?
  theater_booking    TheaterBooking?

  @@index([patient_id])
  @@index([primary_surgeon_id])
  @@index([status])
  @@index([created_at])
  @@index([primary_surgeon_id, status, updated_at])
}

model TheaterBooking {
  id               String               @id @default(uuid())
  theater_id       String
  surgical_case_id String               @unique
  start_time       DateTime
  end_time         DateTime
  status           TheaterBookingStatus @default(PROVISIONAL)
  locked_by        String?
  locked_at        DateTime?
  created_at       DateTime             @default(now())
  updated_at       DateTime             @updatedAt
  version          Int                  @default(1)
  confirmed_at     DateTime?
  confirmed_by     String?
  lock_expires_at  DateTime?
  surgical_case    SurgicalCase         @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)
  theater          Theater              @relation(fields: [theater_id], references: [id], onDelete: Cascade)

  @@index([theater_id])
  @@index([start_time, end_time])
  @@index([start_time, status])
  @@index([theater_id, start_time])
  @@index([theater_id, end_time])
  @@index([status])
  @@index([status, lock_expires_at])
}

model SurgicalChecklist {
  id                    String       @id @default(uuid())
  surgical_case_id      String       @unique
  sign_in_completed_at  DateTime?
  sign_in_by_user_id    String?
  sign_in_by_role       String?
  sign_in_items         String?
  time_out_completed_at DateTime?
  time_out_by_user_id   String?
  time_out_by_role      String?
  time_out_items        String?
  sign_out_completed_at DateTime?
  sign_out_by_user_id   String?
  sign_out_by_role      String?
  sign_out_items        String?
  created_at            DateTime     @default(now())
  updated_at            DateTime     @updatedAt
  sign_in_user          User?        @relation("ChecklistSignIn", fields: [sign_in_by_user_id], references: [id])
  sign_out_user         User?        @relation("ChecklistSignOut", fields: [sign_out_by_user_id], references: [id])
  surgical_case         SurgicalCase @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)
  time_out_user         User?        @relation("ChecklistTimeOut", fields: [time_out_by_user_id], references: [id])

  @@index([surgical_case_id])
  @@index([sign_in_completed_at])
  @@index([time_out_completed_at])
  @@index([sign_out_completed_at])
}

model ClinicalAuditEvent {
  id            String   @id @default(uuid())
  actor_user_id String
  action_type   String
  entity_type   String
  entity_id     String
  metadata      String?
  created_at    DateTime @default(now())
  actor         User     @relation(fields: [actor_user_id], references: [id], onDelete: Cascade)

  @@index([actor_user_id])
  @@index([entity_type, entity_id])
  @@index([action_type])
  @@index([created_at])
}

model ClinicalFormTemplate {
  id          Int                    @id @default(autoincrement())
  key         String
  version     Int                    @default(1)
  title       String
  role_owner  Role
  schema_json String
  ui_json     String
  is_active   Boolean                @default(true)
  created_at  DateTime               @default(now())
  updated_at  DateTime               @updatedAt
  responses   ClinicalFormResponse[]

  @@unique([key, version])
  @@index([key, is_active])
}

model ClinicalFormResponse {
  id                 String                     @id @default(uuid())
  template_id        Int
  template_key       String
  template_version   Int
  surgical_case_id   String
  patient_id         String
  status             ClinicalFormStatus         @default(DRAFT)
  data_json          String
  signed_by_user_id  String?
  signed_at          DateTime?
  created_by_user_id String
  updated_by_user_id String?
  created_at         DateTime                   @default(now())
  updated_at         DateTime                   @updatedAt
  created_by         User                       @relation("FormCreatedBy", fields: [created_by_user_id], references: [id], onDelete: Cascade)
  patient            Patient                    @relation(fields: [patient_id], references: [id], onDelete: Cascade)
  signed_by          User?                      @relation("FormSignedBy", fields: [signed_by_user_id], references: [id])
  surgical_case      SurgicalCase               @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)
  template           ClinicalFormTemplate       @relation(fields: [template_id], references: [id])
  updated_by         User?                      @relation("FormUpdatedBy", fields: [updated_by_user_id], references: [id])
  medication_records SurgicalMedicationRecord[]

  @@unique([template_key, template_version, surgical_case_id])
  @@index([surgical_case_id])
  @@index([surgical_case_id, template_key, status])
  @@index([template_key, status])
  @@index([patient_id])
  @@index([status])
  @@index([template_key])
}

model SurgicalMedicationRecord {
  id                String                @id @default(uuid())
  surgical_case_id  String
  form_response_id  String?
  inventory_item_id Int?
  name              String
  dose_value        Float
  dose_unit         String
  route             String
  status            String
  administered_at   DateTime?
  administered_by   String?
  voided_at         DateTime?
  voided_by         String?
  void_reason       String?
  notes             String?
  created_at        DateTime              @default(now())
  updated_at        DateTime              @updatedAt
  inventory_usage   InventoryUsage?       @relation("MedicationInventoryUsage")
  bill_item         PatientBill?          @relation("MedicationPatientBill")
  form_response     ClinicalFormResponse? @relation(fields: [form_response_id], references: [id])
  inventory_item    InventoryItem?        @relation(fields: [inventory_item_id], references: [id])
  surgical_case     SurgicalCase          @relation(fields: [surgical_case_id], references: [id], onDelete: Cascade)

  @@index([surgical_case_id])
  @@index([form_response_id])
  @@index([status])
}

enum Role {
  ADMIN
  NURSE
  DOCTOR
  LAB_TECHNICIAN
  PATIENT
  CASHIER
  FRONTDESK
  THEATER_TECHNICIAN
}

enum Status {
  ACTIVE
  INACTIVE
  DORMANT
}

enum JOBTYPE {
  FULL
  PART
}

enum Gender {
  MALE
  FEMALE
}

enum AppointmentStatus {
  PENDING
  PENDING_DOCTOR_CONFIRMATION
  CONFIRMED
  SCHEDULED
  CANCELLED
  COMPLETED
  NO_SHOW
  CHECKED_IN
  READY_FOR_CONSULTATION
  IN_CONSULTATION
}

enum AppointmentSource {
  PATIENT_REQUESTED
  FRONTDESK_SCHEDULED
  DOCTOR_FOLLOW_UP
  ADMIN_SCHEDULED
}

enum ConsultationRequestStatus {
  SUBMITTED
  PENDING_REVIEW
  NEEDS_MORE_INFO
  APPROVED
  SCHEDULED
  CONFIRMED
  COMPLETED
  CANCELLED
}

enum PaymentMethod {
  CASH
  CARD
  MOBILE_MONEY
  BANK_TRANSFER
}

enum PaymentStatus {
  PAID
  UNPAID
  PART
}

enum BillType {
  CONSULTATION
  SURGERY
  LAB_TEST
  FOLLOW_UP
  OTHER
}

enum PriceType {
  FIXED
  VARIABLE
  PER_UNIT
  QUOTE_REQUIRED
}

enum InventoryCategory {
  IMPLANT
  SUTURE
  ANESTHETIC
  MEDICATION
  DISPOSABLE
  INSTRUMENT
  DRESSING
  OTHER
}

enum CareNoteType {
  PRE_OP
  POST_OP
  GENERAL
}

enum NotificationType {
  EMAIL
  SMS
  PUSH
  IN_APP
}

enum NotificationStatus {
  PENDING
  SENT
  FAILED
  READ
}

enum DoctorOnboardingStatus {
  INVITED
  ACTIVATED
  PROFILE_COMPLETED
  ACTIVE
}

enum ConsultUrgency {
  ROUTINE
  URGENT
  INTRA_OP
}

enum ConsultStatus {
  OPEN
  IN_PROGRESS
  RESOLVED
  CLOSED
}

enum ImageTimepoint {
  PRE_OP
  ONE_WEEK_POST_OP
  ONE_MONTH_POST_OP
  THREE_MONTHS_POST_OP
  SIX_MONTHS_POST_OP
  ONE_YEAR_POST_OP
  CUSTOM
}

enum ImageAngle {
  FRONT
  OBLIQUE_LEFT
  OBLIQUE_RIGHT
  PROFILE_LEFT
  PROFILE_RIGHT
  BACK
  TOP
  BOTTOM
  CUSTOM
}

enum CaseReadinessStatus {
  NOT_STARTED
  IN_PROGRESS
  PENDING_LABS
  PENDING_CONSENT
  PENDING_REVIEW
  READY
  ON_HOLD
}

enum TaskPriority {
  LOW
  MEDIUM
  HIGH
  URGENT
}

enum TaskStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  CANCELLED
}

enum OutcomeStatus {
  EXCELLENT
  GOOD
  SATISFACTORY
  NEEDS_REVISION
  COMPLICATION
}

enum SurgicalUrgency {
  ELECTIVE
  URGENT
  EMERGENCY
}

enum AnesthesiaType {
  GENERAL
  REGIONAL
  LOCAL
  SEDATION
  TIVA
  MAC
}

enum SurgicalRole {
  SURGEON
  ASSISTANT_SURGEON
  ANESTHESIOLOGIST
  ANESTHETIST_NURSE
  SCRUB_NURSE
  CIRCULATING_NURSE
  THEATER_TECHNICIAN
}

enum WoundClassification {
  CLEAN
  CLEAN_CONTAMINATED
  CONTAMINATED
  DIRTY_INFECTED
}

enum ConsentStatus {
  DRAFT
  PENDING_SIGNATURE
  SIGNED
  REVOKED
  EXPIRED
}

enum ConsentType {
  GENERAL_PROCEDURE
  ANESTHESIA
  BLOOD_TRANSFUSION
  PHOTOGRAPHY
  SPECIAL_PROCEDURE
}

enum OutboxStatus {
  PENDING
  PROCESSING
  PROCESSED
  FAILED
}

enum InviteStatus {
  PENDING
  ACCEPTED
  DECLINED
  CANCELLED
  EXPIRED
}

enum SurgicalCaseStatus {
  DRAFT
  PLANNING
  READY_FOR_SCHEDULING
  SCHEDULED
  IN_PREP
  IN_THEATER
  RECOVERY
  COMPLETED
  CANCELLED
}

enum TheaterBookingStatus {
  PROVISIONAL
  CONFIRMED
  CANCELLED
  COMPLETED
}

enum ChecklistPhase {
  SIGN_IN
  TIME_OUT
  SIGN_OUT
}

enum ClinicalFormStatus {
  DRAFT
  FINAL
}
